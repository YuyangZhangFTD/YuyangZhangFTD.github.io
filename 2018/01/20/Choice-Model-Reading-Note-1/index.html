<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Operation Research," />





  <link rel="alternate" href="/atom.xml" title="Arvin's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="Chap1 Introduction 我们的目标是研究：当一个人（agent）面对很多的选择时，行为过程是如何影响最终的决策。 定义可以观测到的影响因素用\(x\)表示，无法观测的影响因素用\(\epsilon\)表示，则通过一个函数\(y&#x3D;h(x,\epsilon)\)标识用户的选择，这个函数称为行为过程，behavioral process。因为无法观测的变量\(\epsilon\)所以age">
<meta property="og:type" content="article">
<meta property="og:title" content="Choice Model Reading Note 1">
<meta property="og:url" content="http://yoursite.com/2018/01/20/Choice-Model-Reading-Note-1/index.html">
<meta property="og:site_name" content="Arvin&#39;s Blog">
<meta property="og:description" content="Chap1 Introduction 我们的目标是研究：当一个人（agent）面对很多的选择时，行为过程是如何影响最终的决策。 定义可以观测到的影响因素用\(x\)表示，无法观测的影响因素用\(\epsilon\)表示，则通过一个函数\(y&#x3D;h(x,\epsilon)\)标识用户的选择，这个函数称为行为过程，behavioral process。因为无法观测的变量\(\epsilon\)所以age">
<meta property="og:locale">
<meta property="article:published_time" content="2018-01-20T02:41:03.000Z">
<meta property="article:modified_time" content="2018-01-20T02:42:06.000Z">
<meta property="article:author" content="YuyangZhangFTD">
<meta property="article:tag" content="Operation Research">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":true,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/01/20/Choice-Model-Reading-Note-1/"/>





  <title>Choice Model Reading Note 1 | Arvin's Blog</title>
  














<meta name="generator" content="Hexo 5.4.2"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Arvin's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Poem & Algorithm</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/20/Choice-Model-Reading-Note-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Arvin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Choice Model Reading Note 1</h1>
        

        <div class="post-meta">
          

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-20T10:41:03+08:00">
                2018-01-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BriefSummary/" itemprop="url" rel="index">
                    <span itemprop="name">BriefSummary</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="chap1-introduction">Chap1 Introduction</h2>
<p>我们的目标是研究：当一个人（agent）面对很多的选择时，行为过程是如何影响最终的决策。 定义可以观测到的影响因素用<span class="math inline">\(x\)</span>表示，无法观测的影响因素用<span class="math inline">\(\epsilon\)</span>表示，则通过一个函数<span class="math inline">\(y=h(x,\epsilon)\)</span>标识用户的选择，这个函数称为行为过程，behavioral process。因为无法观测的变量<span class="math inline">\(\epsilon\)</span>所以agent的选择并不是确定的，也无法被准确预测。无法观测的影响因素我们认为它服从一定分布，概率分布为<span class="math inline">\(f(\epsilon)\)</span>，则用户behavioral process可以写为<span class="math inline">\(P(y|x)=Prob(\epsilon s.t. h(x,\epsilon)=y)\)</span>。定义指示函数<span class="math inline">\(\mathbb{I}[\cdot]\)</span>，则有 <span class="math display">\[
\begin{aligned}
P(y|x)&amp;=Prob(\mathbb{I}[h(x,\epsilon)=y]=1)\\
&amp;=\int\mathbb{I}[h(x,\epsilon)=y]f(\epsilon)d\epsilon
\end{aligned}
\]</span> 定义效用为 <span class="math display">\[
U=\beta&#39;x+\epsilon
\]</span> 当我们假设<span class="math inline">\(\epsilon\)</span> is distributed logistic时，<span class="math inline">\(f(\epsilon)=\frac{e^{-\epsilon}}{(1+e^{-\epsilon})^2}\)</span>，累积概率密度为<span class="math inline">\(F(\epsilon)=\frac{1}{1+e^{-\epsilon}}\)</span>，则上述概率积分为 <span class="math display">\[
\begin{aligned}
P&amp;=\int\mathbb{I}[\beta&#39;x+\epsilon&gt;0]f(\epsilon)d\epsilon\\
&amp;=\int\mathbb{I}[\epsilon&gt;-\beta&#39;x]f(\epsilon)d\epsilon\\
&amp;=\int^{\infty}_{-\beta&#39;x}
f(\epsilon)d\epsilon\\
&amp;=1-F(-\beta&#39;x)\\
&amp;=1-\frac{1}{1+e^{\beta&#39;x}}\\
&amp;=\frac{1}{1+e^{-\beta&#39;x}}
\end{aligned}
\]</span></p>
<h2 id="chap2-properties-of-discrete-choice-models">Chap2 Properties of Discrete Choice Models</h2>
<p>这张主要讨论所有离散选择模型共有的性质，从选择集（choice set）开始，之后从效用最大行为推导出选择概率，之后展示了如何将individual-level models结合，来进行market-level的预测和如何利用这些模型来对未来进行预测。</p>
<h3 id="the-choice-set">The choice set</h3>
<p>用decision-maker表示决策者，用alternatives表示可选决策，可选决策的集合被称为choice set，alternatives必须是相互排斥的，选择一个决策就不能选择另一个，其次，决策必须是详细的，所有的可选都必须涵盖，最后决策必须是有限的。</p>
<h3 id="derivation-of-choice-probabilities">Derivation of choice probabilities</h3>
<p>一个decision-maker，<span class="math inline">\(n\)</span>，面对<span class="math inline">\(J\)</span>个可选决策，decision-maker会从中选择效用最大的，<span class="math inline">\(U_{nj},j=1,..,J\)</span>，但是这个效用对于decision-maker是已知的，对于研究者却是未知的，decision-maker选择alternative <span class="math inline">\(i\)</span>当且仅当<span class="math inline">\(U_{ni}&gt;U_{nj},\forall j\neq i\)</span>。 对于研究者，我们可以观测到决策的某些属性，记为<span class="math inline">\(x_{nj}\forall j\)</span>，以及decision-maker的一些属性<span class="math inline">\(s_n\)</span>，则我们定义一个代表效用（representative utility）为<span class="math inline">\(V_{nj}=V(x_{nj},s_n)\)</span>，通常函数<span class="math inline">\(V(\cdot)\)</span>由一些研究者确定的未知参数决定。 由于存在无法观测到的影响因素，所以<span class="math inline">\(U_{nj}\neq V_{nj}\)</span>，而是应该定义为<span class="math inline">\(U_{nj}=V_{nj}+\epsilon_{nj}\)</span>，其中<span class="math inline">\(\epsilon_{nj}\)</span>是为包括在<span class="math inline">\(V_{nj}\)</span>中的影响因素，因此<span class="math inline">\(\epsilon_{nj}\)</span>的属性依，如分布，依赖于研究者对于<span class="math inline">\(V_{nj}\)</span>的定义。 通常我们假设其为随机，随机向量<span class="math inline">\(\epsilon_n=\langle\epsilon_1,...,\epsilon_n\rangle\)</span>的联合概率密度为<span class="math inline">\(f(\epsilon_n)\)</span>，则decision-maker <span class="math inline">\(n\)</span>选择alternative <span class="math inline">\(i\)</span>的概率为 <span class="math display">\[
\begin{aligned}
P_{ni}&amp;=Prob(U_{ni}&gt;U_{nj},\forall j\neq i)\\
&amp;=Prob(V_{ni}+\epsilon_{ni}&gt;V_{nj}+\epsilon_{nj},\forall j\neq i)\\
&amp;=Prob(\epsilon_{nj}-\epsilon_{ni}&gt;V_{ni}-V_{nj},\forall j\neq i)\\
&amp;=\int_\epsilon\mathbb{I}[\epsilon_{nj}-\epsilon_{ni}&gt;V_{ni}-V_{nj},\forall j\neq i]f(\epsilon_n)d\epsilon_n
\end{aligned}
\]</span> 举个例子，一个人可以选择乘车（car）或者乘公交（bus）去上班，研究者观测到时间和花费是这个人会主要考虑的，然而研究者意识到还有很多因素也会影响这个人对于这两种选择的效用，因此研究者定义 <span class="math display">\[
\begin{aligned}
V_c=\alpha T_c+\beta M_c\\
V_b=\alpha T_b+\beta M_b
\end{aligned}
\]</span> 其中<span class="math inline">\(T_c\)</span>和<span class="math inline">\(M_c\)</span>是这个人乘车的时间和花费，<span class="math inline">\(T_b\)</span>和<span class="math inline">\(M_b\)</span>是乘公交的，系数<span class="math inline">\(\alpha\)</span>和<span class="math inline">\(\beta\)</span>是已知的或者需要被估计的。 假设我们已知所有参数，并且得到<span class="math inline">\(V_c=4\)</span>和<span class="math inline">\(V_b=3\)</span>，则对于可观测的影响因素，对于这个人，乘车比乘公交更好，多出一个单位效用。然而这并不是说这个人一定会选择乘车，当为观测到的影响因素产生的效用大于可观测影响因素产生的效用时，就会使这个人选择乘公交，即<span class="math inline">\(\epsilon_b-\epsilon_c&gt;1\)</span>时，会选择乘公交。</p>
<h3 id="specific-models">Specific models</h3>
<p>Logit模型是最被广泛使用的离散选择模型，当每个agent对每个alternatives的选择的无法观测的影响因素满足相互独立的假设时成立，即<span class="math inline">\(\epsilon_{ni}\)</span>是独立同分布的时候（极值分布）。这样的假设在某些情况是不恰当的，因为无法观测的影响因素往往是相关联的，比如一个人不喜欢乘坐公交往往也会对地铁有同样的偏好，这样无法观测的影响因素对于公交的影响和对于地铁的影响就有一定关联，独立同分布的假设就不成立了。 广义极值模型（GEV，Generalized Extreme Value）很大程度上可以避免这种问题，GEV有多种形式，但是共同的特点是它允许无法观测的影响因素之间有联系。 Probits模型是基于无法观测的影响因素服从联合正态分布<span class="math inline">\(\epsilon&#39;_n=\langle\epsilon_{n1},...,\epsilon_{nJ}\rangle\sim N(0,\Omega)\)</span>，用满秩的协方差矩阵<span class="math inline">\(\Omega\)</span>可以刻画变量之间的correlation and heteroskedasticity。 Mixed logit可以允许无法观测因素服从任意分布，可以分解为两部分，一部分是iid的极值分布，另一部分是有相关性的，这部分可以是任何分布。</p>
<h3 id="identification-of-choice-models">Identification of choice models</h3>
<p>效用的大小不重要，效用间的差异比较重要。Only differences in utility matters and the scale of utility is arbitrary.</p>
<h2 id="logit">Logit</h2>
<h3 id="choice-probabilities">choice probabilities</h3>
<p>当我们假设每个<span class="math inline">\(\epsilon_{nj}\)</span>是独立的极值分布时，我们可以用logit model来描述选择模型。 <span class="math display">\[
\begin{aligned}
f(\epsilon_{nj})=e^{-\epsilon_{nj}}e^{-e^{-\epsilon_{nj}}}\\
F(-\epsilon_{nj})=e^{-e^{-\epsilon_{nj}}}
\end{aligned}
\]</span> 其方差为<span class="math inline">\(\pi/6\)</span>，均值为0。两个极值变量服从logistic分布，<span class="math inline">\(\epsilon^*_{nji}=\epsilon_{nj}-\epsilon_{ni}\)</span>， <span class="math display">\[
F(\epsilon^*_{nji})=\frac{\epsilon^*_{nji}}{1+\epsilon^*_{nji}}
\]</span> decision-maker <span class="math inline">\(n\)</span>选择alternative <span class="math inline">\(j\)</span>的概率为 <span class="math display">\[
\begin{aligned}
P_{ni}&amp;=Prob(V_{ni}+\epsilon_{ni}&gt;V_{nj}+\epsilon_{nj},\forall j\neq i)\\
&amp;=Prob(\epsilon_{nj}&lt;V_{ni}+\epsilon_{ni}-V_{nj},\forall j\neq i)
\end{aligned}
\]</span> 所以有 <span class="math display">\[
\begin{aligned}
P_{ni}|\epsilon_{ni}&amp;=\prod_{j\neq i}e^{-e^{-(\epsilon_{ni}+V_{ni}-V_{nj})}}\\
P_{ni}&amp;=\int(\prod_{j\neq i}e^{-e^{-(\epsilon_{ni}+V_{ni}-V_{nj})}})e^{-\epsilon_{ni}}e^{-e^{-\epsilon_{ni}}}d\epsilon_{ni}\\
&amp;=\int^{\infty}_{-\infty}(\prod_{j\neq i}e^{-e^{-(s+V_{ni}-V_{nj})}})e^{-s}e^{-e^{-s}}ds\\
&amp;=\int^{\infty}_{-\infty}(\prod_{j}e^{-e^{-(s+V_{ni}-V_{nj})}})e^{-s}ds\\
&amp;=\int^{\infty}_{-\infty}\exp(-\sum_j e^{-(s+V_{ni}-V_{nj})})e^{-s}ds\\
&amp;=\int^{\infty}_{-\infty}\exp(-e^{-s}\sum_j e^{-(V_{ni}-V_{nj})})e^{-s}ds\\
&amp;=\int^{\infty}_{-\infty}\exp(-t\sum_j e^{-(V_{ni}-V_{nj})})(-dt)\\
&amp;=
\left.\frac{\exp(-t\sum_j e^{-(V_{ni}-V_{nj})})}{-\sum_j e^{-(V_{ni}-V_{nj})}}\right|^{\infty}_0\\
&amp;=\frac{1}{-\sum_j e^{-(V_{ni}-V_{nj})}}\\
&amp;=\frac{ e^{V_{ni}}}{\sum_j e^{V_{nj}}}\\
\end{aligned}
\]</span> logit模型有以下几个优势：首先它输出的是<span class="math inline">\([0,1]\)</span>的概率，其次所有alternatives的和为1，这表示decision-maker必然会选择一个alternative。</p>
<h3 id="the-scale-parameter">The scale parameter</h3>
<p>如果无法观测的影响因素有方差<span class="math inline">\(\sigma^2*(\pi^2/6)\)</span>，则效用应该变为<span class="math inline">\(U_{nj}=V_{nj}/\sigma+\epsilon_{nj}\)</span>， <span class="math display">\[
P_{ni}=\frac{e^{V_{ni}/\sigma}}{\sum_j e^{V_{nj}/\sigma}}
\]</span></p>
<h3 id="power-and-limitations-of-logit">Power and limitations of logit</h3>
<ul>
<li>Logit can represent systematic taste variation (that is, taste variation that relates to observed characteristics of the decisionmaker) but not random taste variation (differences in tastes that cannot be linked to observed characteristics)</li>
<li>The logit model implies proportional substitution across alternatives, given the researcher’s specification of representative utility. To capture more flexible forms of substitution, other models are needed.</li>
<li>f unobserved factors are independent over time in repeated choice situations, then logit can capture the dynamics of repeated choice, including state-dependence.</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Operation-Research/" rel="tag"># Operation Research</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/01/20/Integer-Programming-Reading-Note-1/" rel="next" title="Integer Programming Reading Note 1">
                <i class="fa fa-chevron-left"></i> Integer Programming Reading Note 1
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/01/21/Embedding-based-News-Recommendation-for-Millions-of-Users/" rel="prev" title="Embedding-based News Recommendation for Millions of Users">
                Embedding-based News Recommendation for Millions of Users <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="uyan_frame"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="" />
          <p class="site-author-name" itemprop="name"></p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">115</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">56</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#chap1-introduction"><span class="nav-number">1.</span> <span class="nav-text">Chap1 Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chap2-properties-of-discrete-choice-models"><span class="nav-number">2.</span> <span class="nav-text">Chap2 Properties of Discrete Choice Models</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#the-choice-set"><span class="nav-number">2.1.</span> <span class="nav-text">The choice set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#derivation-of-choice-probabilities"><span class="nav-number">2.2.</span> <span class="nav-text">Derivation of choice probabilities</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#specific-models"><span class="nav-number">2.3.</span> <span class="nav-text">Specific models</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#identification-of-choice-models"><span class="nav-number">2.4.</span> <span class="nav-text">Identification of choice models</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#logit"><span class="nav-number">3.</span> <span class="nav-text">Logit</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#choice-probabilities"><span class="nav-number">3.1.</span> <span class="nav-text">choice probabilities</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#the-scale-parameter"><span class="nav-number">3.2.</span> <span class="nav-text">The scale parameter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#power-and-limitations-of-logit"><span class="nav-number">3.3.</span> <span class="nav-text">Power and limitations of logit</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YuyangZhangFTD</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  
    

    
      <!-- UY BEGIN -->
      <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2140861"></script>
      <!-- UY END -->
    
  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.2"></script>



  

  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  


  

  

</body>
</html>
